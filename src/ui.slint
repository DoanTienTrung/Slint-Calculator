import { Button } from "std-widgets.slint";

component ColorButton inherits Rectangle {
    in property <string> label;
    in property <brush> bg: #e0e0e0;
    in property <brush> fg: #000;
    callback on_click;

    background: bg;
    border-radius: 8px;
    min-height: 60px;

    Text {
        text: root.label;
        color: root.fg;
        horizontal-alignment: center;
        vertical-alignment: center;
        font-size: 20px;
        font-weight: 600;
    }

    touch_area := TouchArea {
        clicked => root.on_click();
    }

    states [
        hovered when touch_area.has-hover: { opacity: 0.85; }
        pressed when touch_area.pressed: { opacity: 0.7; }
    ]
    animate opacity { duration: 150ms; easing: ease-in-out; }
}

export component Calculator inherits Window {
    width: 400px;
    height: 600px;
    title: "Simple Calculator";

    in-out property <string> display: "0";
    callback button_pressed(string);

    Rectangle {
        width: 100%;
        height: 100%;
        background: #f4f4f4;

        VerticalLayout {
            spacing: 10px;
            padding: 12px;

            // Màn hình hiển thị
            Rectangle {
                height: 100px;
                background: white;
                border-radius: 8px;
                border-color: #ccc;
                border-width: 1px;

                Text {
                    text: root.display;
                    horizontal-alignment: right;
                    vertical-alignment: center;
                    padding-right: 12px;
                    font-size: 32px;
                    color: #333;
                    font-weight: 700;
                }
            }

            // ✅ Dùng GridLayout để chứa các Row
            GridLayout {
                spacing: 8px;
                vertical-stretch: 1;

                // Hàng 1
                Row {
                    ColorButton { label: "C"; bg: #f44336; fg: white; on_click => root.button_pressed("C"); }
                    ColorButton { label: "⌫"; bg: #ff9800; fg: white; on_click => root.button_pressed("⌫"); }
                    ColorButton { label: "±"; bg: #2196f3; fg: white; on_click => root.button_pressed("±"); }
                    ColorButton { label: "%"; bg: #9c27b0; fg: white; on_click => root.button_pressed("%"); }
                }

                // Hàng 2
                Row {
                    ColorButton { label: "7"; on_click => root.button_pressed("7"); }
                    ColorButton { label: "8"; on_click => root.button_pressed("8"); }
                    ColorButton { label: "9"; on_click => root.button_pressed("9"); }
                    ColorButton { label: "÷"; bg: #4caf50; fg: white; on_click => root.button_pressed("÷"); }
                }

                // Hàng 3
                Row {
                    ColorButton { label: "4"; on_click => root.button_pressed("4"); }
                    ColorButton { label: "5"; on_click => root.button_pressed("5"); }
                    ColorButton { label: "6"; on_click => root.button_pressed("6"); }
                    ColorButton { label: "×"; bg: #4caf50; fg: white; on_click => root.button_pressed("×"); }
                }

                // Hàng 4
                Row {
                    ColorButton { label: "1"; on_click => root.button_pressed("1"); }
                    ColorButton { label: "2"; on_click => root.button_pressed("2"); }
                    ColorButton { label: "3"; on_click => root.button_pressed("3"); }
                    ColorButton { label: "−"; bg: #4caf50; fg: white; on_click => root.button_pressed("−"); }
                }

                // Hàng 5
                Row {
                    ColorButton { label: "0"; on_click => root.button_pressed("0"); }
                    ColorButton { label: "."; on_click => root.button_pressed("."); }
                    ColorButton { label: "="; bg: #2196f3; fg: white; on_click => root.button_pressed("="); }
                    ColorButton { label: "+"; bg: #4caf50; fg: white; on_click => root.button_pressed("+"); }
                }
            }
        }
    }
}
